/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/openrouteservice-js@0.4.1/dist/ors-js-client.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const constants={defaultAPIVersion:"v2",defaultHost:"https://api.openrouteservice.org",missingAPIKeyMsg:"Please add your openrouteservice api_key..",baseUrlConstituents:["host","service","api_version","mime_type"],propNames:{apiKey:"api_key",host:"host",service:"service",apiVersion:"api_version",mimeType:"mime_type",profile:"profile",format:"format",timeout:"timeout"}};class OrsUtil{fillArgs(s,e){return e={...s,...e}}saveArgsToCache(s){return{host:s[constants.propNames.host],api_version:s[constants.propNames.apiVersion],profile:s[constants.propNames.profile],format:s[constants.propNames.format],service:s[constants.propNames.service],api_key:s[constants.propNames.apiKey],mime_type:s[constants.propNames.mimeType]}}prepareRequest(s){return delete s[constants.propNames.mimeType],delete s[constants.propNames.host],delete s[constants.propNames.apiVersion],delete s[constants.propNames.service],delete s[constants.propNames.apiKey],delete s[constants.propNames.profile],delete s[constants.propNames.format],delete s[constants.propNames.timeout],{...s}}prepareUrl(s){let e=s[constants.propNames.host],t=[s[constants.propNames.apiVersion],s[constants.propNames.service],s[constants.propNames.profile],s[constants.propNames.format]];return t=t.join("/"),t=t.replace(/\/(\/)+/g,"/"),"/"===t[0]&&(t=t.slice(1)),"/"===t.slice(-1)[0]&&(t=t.slice(0,-1)),e=e+"/"+t,e}}const orsUtil$4=new OrsUtil;class OrsBase{constructor(s){this.defaultArgs={},this.requestArgs={},this.argsCache=null,this.customHeaders={},this._setRequestDefaults(s)}_setRequestDefaults(s){if(this.defaultArgs[constants.propNames.host]=constants.defaultHost,s[constants.propNames.host]&&(this.defaultArgs[constants.propNames.host]=s[constants.propNames.host]),s[constants.propNames.service]&&(this.defaultArgs[constants.propNames.service]=s[constants.propNames.service]),s[constants.propNames.timeout]&&(this.defaultArgs[constants.propNames.timeout]=s[constants.propNames.timeout]),constants.propNames.apiKey in s)this.defaultArgs[constants.propNames.apiKey]=s[constants.propNames.apiKey];else if(!s[constants.propNames.host])throw console.error(constants.missingAPIKeyMsg),new Error(constants.missingAPIKeyMsg)}checkHeaders(){this.requestArgs.customHeaders&&(this.customHeaders=this.requestArgs.customHeaders,delete this.requestArgs.customHeaders),"Content-type"in this.customHeaders||(this.customHeaders={...this.customHeaders,"Content-type":"application/json"})}async fetchRequest(s,e){let t=orsUtil$4.prepareUrl(this.argsCache);"pois"===this.argsCache[constants.propNames.service]&&(t+=t.indexOf("?")>-1?"&":"?");const r={Authorization:this.argsCache[constants.propNames.apiKey]};return await fetch(t,{method:"POST",body:JSON.stringify(s),headers:{...r,...this.customHeaders},signal:e.signal})}async createRequest(s){var e;const t=new AbortController,r=setTimeout((()=>t.abort()),this.defaultArgs[constants.propNames.timeout]||5e3);try{const r=await this.fetchRequest(s,t);if(!r.ok){const s=new Error(r.statusText);throw s.status=r.status,s.response=r,s}return"gpx"===(null==(e=this.argsCache)?void 0:e.format)?await r.text():await r.json()}finally{clearTimeout(r)}}getBody(){return this.httpArgs}async calculate(s){this.requestArgs=s,this.checkHeaders(),this.requestArgs=orsUtil$4.fillArgs(this.defaultArgs,this.requestArgs),this.argsCache=orsUtil$4.saveArgsToCache(this.requestArgs),this.httpArgs=orsUtil$4.prepareRequest(this.requestArgs);const e=this.getBody(this.httpArgs);return await this.createRequest(e)}}const orsUtil$3=new OrsUtil;class OrsGeocode extends OrsBase{constructor(s){super(s),this.lookupParameter={api_key:function(s,e){return s+"="+e},text:function(s,e){return"&"+s+"="+encodeURIComponent(e)},focus_point:function(s,e){let t="";return t+="&focus.point.lon="+e[1],t+="&focus.point.lat="+e[0],t},boundary_bbox:function(s,e){let t="";return t+="&boundary.rect.min_lon="+e[0][1],t+="&boundary.rect.min_lat="+e[0][0],t+="&boundary.rect.max_lon="+e[1][1],t+="&boundary.rect.max_lat="+e[1][0],t},point:function(s,e){if(e&&Array.isArray(e.lat_lng)){let s="";return s+="&point.lon="+e.lat_lng[1],s+="&point.lat="+e.lat_lng[0],s}},boundary_circle:function(s,e){let t="";return t+="&boundary.circle.lon="+e.lat_lng[1],t+="&boundary.circle.lat="+e.lat_lng[0],t+="&boundary.circle.radius="+e.radius,t},sources:function(s,e){let t="&sources=";if(e){for(const s in e)Number(s)>0&&(t+=","),t+=e[s];return t}},layers:function(s,e){let t="&layers=",r=0;for(s in e)r>0&&(t+=","),t+=e[s],r++;return t},boundary_country:function(s,e){return"&boundary.country="+e},size:function(s,e){return"&"+s+"="+e},address:function(s,e){return"&"+s+"="+e},neighbourhood:function(s,e){return"&"+s+"="+e},borough:function(s,e){return"&"+s+"="+e},locality:function(s,e){return"&"+s+"="+e},county:function(s,e){return"&"+s+"="+e},region:function(s,e){return"&"+s+"="+e},postalcode:function(s,e){return"&"+s+"="+e},country:function(s,e){return"&"+s+"="+e}}}getParametersAsQueryString(s){let e="";for(const t in s){const r=s[t];constants.baseUrlConstituents.indexOf(t)<=-1&&(e+=this.lookupParameter[t](t,r))}return e}async fetchGetRequest(s){let e=orsUtil$3.prepareUrl(this.requestArgs);return e+="?"+this.getParametersAsQueryString(this.requestArgs),await fetch(e,{method:"GET",headers:this.customHeaders,signal:s.signal})}async geocodePromise(){const s=new AbortController,e=setTimeout((()=>s.abort()),this.defaultArgs[constants.propNames.timeout]||5e3);try{const e=await this.fetchGetRequest(s);if(!e.ok){const s=new Error(e.statusText);throw s.status=e.status,s.response=e,s}return await e.json()||e.text()}finally{clearTimeout(e)}}async geocode(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.requestArgs.service="geocode/search"),this.requestArgs=orsUtil$3.fillArgs(this.defaultArgs,this.requestArgs),await this.geocodePromise()}async reverseGeocode(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.requestArgs.service="geocode/reverse"),this.requestArgs=orsUtil$3.fillArgs(this.defaultArgs,this.requestArgs),await this.geocodePromise()}async structuredGeocode(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.requestArgs.service="geocode/search/structured"),this.requestArgs=orsUtil$3.fillArgs(this.defaultArgs,this.requestArgs),await this.geocodePromise()}}class OrsIsochrones extends OrsBase{constructor(s){super(s),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.defaultArgs.service="isochrones"),s[constants.propNames.apiVersion]||(this.defaultArgs.api_version=constants.defaultAPIVersion)}getBody(s){const e={};return s.restrictions&&(e.profile_params={restrictions:{...s.restrictions}},delete s.restrictions),s.avoidables&&(e.avoid_features=[...s.avoidables],delete s.avoidables),s.avoid_polygons&&(e.avoid_polygons={...s.avoid_polygons},delete s.avoid_polygons),Object.keys(e).length>0?{...s,options:e}:{...s}}}class OrsMatrix extends OrsBase{constructor(s){super(s),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.defaultArgs[constants.propNames.service]="matrix"),s[constants.propNames.apiVersion]||(this.defaultArgs.api_version=constants.defaultAPIVersion)}}class OrsDirections extends OrsBase{constructor(s){super(s),this.defaultArgs[constants.propNames.service]||(this.defaultArgs[constants.propNames.service]="directions"),s[constants.propNames.apiVersion]||(this.defaultArgs.api_version=constants.defaultAPIVersion)}getBody(s){return s.options&&"object"!=typeof s.options&&(s.options=JSON.parse(s.options)),s.restrictions&&(s.options=s.options||{},s.options.profile_params={restrictions:{...s.restrictions}},delete s.restrictions),s.avoidables&&(s.options=s.options||{},s.options.avoid_features=[...s.avoidables],delete s.avoidables),s}}const orsUtil$2=new OrsUtil;class OrsPois extends OrsBase{constructor(s){super(s),this.defaultArgs[constants.propNames.service]||(this.defaultArgs[constants.propNames.service]="pois")}generatePayload(s){const e={};for(const t in s)constants.baseUrlConstituents.indexOf(t)>-1||t===constants.propNames.apiKey||t===constants.propNames.timeout||(e[t]=s[t]);return e}async poisPromise(){this.requestArgs.request=this.requestArgs.request||"pois",this.argsCache=orsUtil$2.saveArgsToCache(this.requestArgs),this.requestArgs[constants.propNames.service]&&delete this.requestArgs[constants.propNames.service];const s=this.generatePayload(this.requestArgs);return await this.createRequest(s)}async pois(s){return this.requestArgs=s,this.checkHeaders(),this.requestArgs=orsUtil$2.fillArgs(this.defaultArgs,this.requestArgs),await this.poisPromise()}}const orsUtil$1=new OrsUtil;class OrsElevation extends OrsBase{generatePayload(s){const e={};for(const t in s)constants.baseUrlConstituents.indexOf(t)<=-1&&(e[t]=s[t]);return e}async elevationPromise(){this.argsCache=orsUtil$1.saveArgsToCache(this.requestArgs);const s=this.generatePayload(this.requestArgs);return await this.createRequest(s)}async lineElevation(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.requestArgs[constants.propNames.service]="elevation/line"),this.requestArgs=orsUtil$1.fillArgs(this.defaultArgs,this.requestArgs),await this.elevationPromise()}async pointElevation(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.requestArgs[constants.propNames.service]="elevation/point"),this.requestArgs=orsUtil$1.fillArgs(this.defaultArgs,this.requestArgs),await this.elevationPromise()}}const orsUtil=new OrsUtil;class OrsOptimization extends OrsBase{generatePayload(s){let e={};for(const t in s)constants.baseUrlConstituents.indexOf(t)<=-1&&(e[t]=s[t]);return e}async optimizationPromise(){this.argsCache=orsUtil.saveArgsToCache(this.requestArgs);const s=this.generatePayload(this.requestArgs);return await this.createRequest(s)}async optimize(s){return this.requestArgs=s,this.checkHeaders(),this.defaultArgs[constants.propNames.service]||s[constants.propNames.service]||(s[constants.propNames.service]="optimization"),this.requestArgs=orsUtil.fillArgs(this.defaultArgs,this.requestArgs),await this.optimizationPromise()}}class OrsSnap extends OrsBase{constructor(s){super(s),this.defaultArgs[constants.propNames.service]||this.requestArgs[constants.propNames.service]||(this.defaultArgs[constants.propNames.service]="snap"),s[constants.propNames.apiVersion]||(this.defaultArgs.api_version=constants.defaultAPIVersion)}}const Openrouteservice={Geocode:OrsGeocode,Isochrones:OrsIsochrones,Directions:OrsDirections,Matrix:OrsMatrix,Pois:OrsPois,Elevation:OrsElevation,Optimization:OrsOptimization,Snap:OrsSnap};"object"==typeof module&&"object"==typeof module.exports?module.exports=Openrouteservice:"function"==typeof define&&define.amd&&define(Openrouteservice),"undefined"!=typeof window&&(window.Openrouteservice=Openrouteservice);export{Openrouteservice as default};
//# sourceMappingURL=/sm/f6bcfa348d4704e2e710dbb191ce11e30d37fd3ce6f90e126f173874a0a2216b.map